(self.webpackChunkcookbook_web=self.webpackChunkcookbook_web||[]).push([[341],{1460:function(h){h.exports={"comment-action":"comment-action___35cH_","recipe-img":"recipe-img___2j0aT",desc:"desc___2m1Zw","page-card":"page-card___3B0Mq"}},9887:function(h,R,n){"use strict";n.r(R),n.d(R,{default:function(){return H}});var V=n(49111),L=n(19650),Y=n(18313),B=n(20807),Q=n(60663),T=n(31990),X=n(94233),K=n(51890),$=n(98858),D=n(4914),b=n(20228),W=n(11382),g=n(86582),G=n(57663),p=n(60404),J=n(34792),C=n(48086),w=n(9715),E=n(82482),j=n(2824),Z=n(58812),y=n(70844),f=n(19630),x=n(48971),d=n(30202),S=n(1460),v=n.n(S),U=n(88793),F=n(17566),N=n(67294),t=n(85893),z=function(r){var M=r.onRefresh,u=E.Z.useForm(),c=(0,j.Z)(u,1),o=c[0],O=(0,f.UO)(),A=O.recipeId,P=(0,x.QT)(function(l){return{url:"/api/recipe/".concat(A,"/add_review/"),method:"post",data:l}},{manual:!0,onSuccess:function(s){s!=null&&s.userName&&C.default.success("Successfully commented.")}}),e=P.run,I=o.getFieldValue,a=o.resetFields,_=o.submit,i=function(){var s=I("content");if(!s){C.default.warn("Empty content!");return}_(),e({id:3,content:s}),a(),setTimeout(function(){M()},100)};return(0,t.jsxs)(E.Z,{form:o,children:[(0,t.jsx)(E.Z.Item,{name:"content",children:(0,t.jsx)(F.Z,{rows:4})}),(0,t.jsx)(E.Z.Item,{children:(0,t.jsx)(p.Z,{onClick:i,type:"primary",children:"Add Comment"})})]})};function H(){var m,r,M=(0,N.useState)([]),u=(0,j.Z)(M,2),c=u[0],o=u[1],O=(0,f.UO)(),A=O.recipeId,P=(0,x.QT)("/api/recipe/".concat(A,"/"),{onSuccess:function(_){for(var i=(0,g.Z)(c),l=0;l<(_==null||(s=_.reviews)===null||s===void 0?void 0:s.length)-c.length;l++){var s;i.unshift(U.aY[Math.floor(Math.random()*U.aY.length)])}o(i)}}),e=P.data,I=P.run;return(0,t.jsx)(y.ZP,{title:"Recipe: ".concat(e==null?void 0:e.recipeTitle),extra:e?(0,t.jsxs)("span",{children:[(0,t.jsx)(Z.Z,{}),(0,t.jsx)("span",{className:v()["comment-action"],children:e==null?void 0:e.recipeLike})]}):null,children:(0,t.jsxs)(L.Z,{size:"large",direction:"vertical",className:v()["page-card"],children:[(0,t.jsxs)(d.ZP,{split:"vertical",layout:"center",children:[(0,t.jsx)(d.ZP,{colSpan:"30%",children:e?(0,t.jsx)("img",{alt:"".concat(e==null?void 0:e.recipeTitle," Picture"),src:e==null?void 0:e.recipeUrl,className:v()["recipe-img"]}):(0,t.jsx)(W.Z,{})}),(0,t.jsx)(d.ZP,{children:(0,t.jsxs)(D.Z,{title:"Recipe Detail",column:1,bordered:!0,labelStyle:{fontSize:"1.005rem"},contentStyle:{fontSize:"1.005rem"},children:[(0,t.jsx)(D.Z.Item,{label:"Recipe Name",children:e==null?void 0:e.recipeTitle}),(0,t.jsx)(D.Z.Item,{label:"Ingredients",children:e==null?void 0:e.recipeIngredients.map(function(a,_){return(0,t.jsx)("div",{children:"".concat(_+1,".","\xA0","\xA0").concat(a)},"ing-idx-".concat(_))})})]})})]}),(0,t.jsx)(d.ZP,{title:"Directions",className:v().desc,children:e==null?void 0:e.recipeDirections.map(function(a,_){return(0,t.jsx)("div",{children:"Step ".concat(_+1,":","\xA0","\xA0","\xA0").concat(a)},"ing-idx-".concat(_))})}),(0,t.jsxs)(d.ZP,{title:"Comment",children:[(0,t.jsx)(T.Z,{avatar:(0,t.jsx)(K.C,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",alt:"Han Solo"}),content:(0,t.jsx)(z,{onRefresh:I})}),e!=null&&e.reviews?(0,t.jsx)(B.ZP,{className:"comment-list",header:"".concat(e==null||(m=e.reviews)===null||m===void 0?void 0:m.length," repl").concat((e==null||(r=e.reviews)===null||r===void 0?void 0:r.length)>1?"ies":"y"),itemLayout:"horizontal",dataSource:e==null?void 0:e.reviews,renderItem:function(_,i){return(0,t.jsx)("li",{children:(0,t.jsx)(T.Z,{author:_.posterName,avatar:c[i],content:_.reviewContent})})}}):null]})]})})}}}]);
