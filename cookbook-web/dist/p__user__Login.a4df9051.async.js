(self.webpackChunkcookbook_web=self.webpackChunkcookbook_web||[]).push([[531],{68408:function(Q){Q.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",top:"top___1C1Zi",header:"header___5xZ3f",logo:"logo___2hXsy",title:"title___1-xuF",desc:"desc___-njyT",main:"main___x4OjT",icon:"icon___rzGKO",other:"other___lLyaU",register:"register___11Twg",prefixIcon:"prefixIcon___23Xrx"}},7330:function(){},65302:function(Q,W,e){"use strict";e.r(W),e.d(W,{default:function(){return Xe}});var We=e(49111),oe=e(19650),we=e(18106),w=e(51752),P=e(11849),D=e(3182),ke=e(34792),G=e(48086),K=e(2824),qe=e(43673),_e=e(7330),X=e(22122),U=e(96156),le=e(28481),n=e(67294),ie=e(54549),ce=e(15873),ue=e(57119),de=e(68628),ve=e(73218),fe=e(38819),me=e(68855),ge=e(40847),he=e(43061),pe=e(60444),ye=e(94184),Y=e.n(ye),Ce=e(86032),xe=e(5467),Ze=e(6610),Se=e(5991),Ne=e(10379),je=e(44144),Ee=function(d){(0,Ne.Z)(a,d);var t=(0,je.Z)(a);function a(){var s;return(0,Ze.Z)(this,a),s=t.apply(this,arguments),s.state={error:void 0,info:{componentStack:""}},s}return(0,Se.Z)(a,[{key:"componentDidCatch",value:function(i,C){this.setState({error:i,info:C})}},{key:"render",value:function(){var i=this.props,C=i.message,Z=i.description,S=i.children,N=this.state,I=N.error,j=N.info,M=j&&j.componentStack?j.componentStack:null,F=typeof C=="undefined"?(I||"").toString():C,z=typeof Z=="undefined"?M:Z;return I?n.createElement(q,{type:"error",message:F,description:n.createElement("pre",null,z)}):S}}]),a}(n.Component),Le=e(96159),Oe=function(d,t){var a={};for(var s in d)Object.prototype.hasOwnProperty.call(d,s)&&t.indexOf(s)<0&&(a[s]=d[s]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(d);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(d,s[i])&&(a[s[i]]=d[s[i]]);return a},Te={success:fe.Z,info:ge.Z,error:he.Z,warning:me.Z},Ie={success:ce.Z,info:de.Z,error:ve.Z,warning:ue.Z},k=function(t){var a,s=t.description,i=t.prefixCls,C=t.message,Z=t.banner,S=t.className,N=S===void 0?"":S,I=t.style,j=t.onMouseEnter,M=t.onMouseLeave,F=t.onClick,z=t.afterClose,A=t.showIcon,g=t.closable,B=t.closeText,$=t.action,E=Oe(t,["description","prefixCls","message","banner","className","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","action"]),J=n.useState(!1),H=(0,le.Z)(J,2),m=H[0],u=H[1],c=n.useRef(),v=n.useContext(Ce.E_),y=v.getPrefixCls,h=v.direction,o=y("alert",i),R=function(f){var O;u(!0),(O=E.onClose)===null||O===void 0||O.call(E,f)},V=function(){var f=E.type;return f!==void 0?f:Z?"warning":"info"},ae=B?!0:g,l=V(),Ye=function(){var f=E.icon,O=(s?Ie:Te)[l]||null;return f?(0,Le.wm)(f,n.createElement("span",{className:"".concat(o,"-icon")},f),function(){return{className:Y()("".concat(o,"-icon"),(0,U.Z)({},f.props.className,f.props.className))}}):n.createElement(O,{className:"".concat(o,"-icon")})},be=function(){return ae?n.createElement("button",{type:"button",onClick:R,className:"".concat(o,"-close-icon"),tabIndex:0},B?n.createElement("span",{className:"".concat(o,"-close-text")},B):n.createElement(ie.Z,null)):null},se=Z&&A===void 0?!0:A,Je=Y()(o,"".concat(o,"-").concat(l),(a={},(0,U.Z)(a,"".concat(o,"-with-description"),!!s),(0,U.Z)(a,"".concat(o,"-no-icon"),!se),(0,U.Z)(a,"".concat(o,"-banner"),!!Z),(0,U.Z)(a,"".concat(o,"-rtl"),h==="rtl"),a),N),Qe=(0,xe.Z)(E);return n.createElement(pe.Z,{visible:!m,motionName:"".concat(o,"-motion"),motionAppear:!1,motionEnter:!1,onLeaveStart:function(f){return{maxHeight:f.offsetHeight}},onLeaveEnd:z},function(L){var f=L.className,O=L.style;return n.createElement("div",(0,X.Z)({ref:c,"data-show":!m,className:Y()(Je,f),style:(0,X.Z)((0,X.Z)({},I),O),onMouseEnter:j,onMouseLeave:M,onClick:F,role:"alert"},Qe),se?Ye():null,n.createElement("div",{className:"".concat(o,"-content")},n.createElement("div",{className:"".concat(o,"-message")},C),n.createElement("div",{className:"".concat(o,"-description")},s)),$?n.createElement("div",{className:"".concat(o,"-action")},$):null,be())})};k.ErrorBoundary=Ee;var q=k,Me=e(94043),T=e.n(Me),Fe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},Pe=Fe,_=e(27029),ee=function(t,a){return n.createElement(_.Z,Object.assign({},t,{ref:a,icon:Pe}))};ee.displayName="LockOutlined";var Ue=n.forwardRef(ee),ze={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm215.3 337.7c.3 4.7.3 9.6.3 14.4 0 146.8-111.8 315.9-316.1 315.9-63 0-121.4-18.3-170.6-49.8 9 1 17.6 1.4 26.8 1.4 52 0 99.8-17.6 137.9-47.4-48.8-1-89.8-33-103.8-77 17.1 2.5 32.5 2.5 50.1-2a111 111 0 01-88.9-109v-1.4c14.7 8.3 32 13.4 50.1 14.1a111.13 111.13 0 01-49.5-92.4c0-20.7 5.4-39.6 15.1-56a315.28 315.28 0 00229 116.1C492 353.1 548.4 292 616.2 292c32 0 60.8 13.4 81.1 35 25.1-4.7 49.1-14.1 70.5-26.7-8.3 25.7-25.7 47.4-48.8 61.1 22.4-2.4 44-8.6 64-17.3-15.1 22.2-34 41.9-55.7 57.6z"}}]},name:"twitter-circle",theme:"filled"},Ae=ze,te=function(t,a){return n.createElement(_.Z,Object.assign({},t,{ref:a,icon:Ae}))};te.displayName="TwitterCircleFilled";var Be=n.forwardRef(te),$e=e(89366),He=e(88245),ne=e(14267),x=e(48971),b=e(19611),Re=e(29791),Ve=e(36571),De=e(68408),p=e.n(De),re=e(88793),r=e(85893),Ge=function(t){var a=t.content;return(0,r.jsx)(q,{style:{marginBottom:24},message:a,type:"error",showIcon:!0})},Ke=function(t){var a=(0,n.useState)(!1),s=(0,K.Z)(a,2),i=s[0],C=s[1],Z=(0,n.useState)({}),S=(0,K.Z)(Z,2),N=S[0],I=S[1],j=(0,n.useState)("account"),M=(0,K.Z)(j,2),F=M[0],z=M[1],A=(0,x.tT)("@@initialState"),g=A.initialState,B=A.setInitialState;(0,n.useEffect)(function(){var m,u;if((g==null||(m=g.currentUser)===null||m===void 0?void 0:m.access)==="admin"||(g==null||(u=g.currentUser)===null||u===void 0?void 0:u.access)==="user"){var c,v;G.default.info("You have already logged in."),x.m8.push((x.m8===null||x.m8===void 0||(c=x.m8.location)===null||c===void 0||(v=c.query)===null||v===void 0?void 0:v.redirect)||"/")}},[]);var $=function(){var m=(0,D.Z)(T().mark(function u(){var c,v;return T().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,g==null||(c=g.fetchUserInfo)===null||c===void 0?void 0:c.call(g);case 2:if(v=h.sent,!v){h.next=6;break}return h.next=6,B(function(o){return(0,P.Z)((0,P.Z)({},o),{},{currentUser:v})});case 6:case"end":return h.stop()}},u)}));return function(){return m.apply(this,arguments)}}(),E=function(){var m=(0,D.Z)(T().mark(function u(c){var v,y,h,o,R,V;return T().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return C(!0),l.prev=1,l.next=4,(0,Ve.x4)((0,P.Z)({},c));case 4:if(v=l.sent,y=v.data,y.status!=="ok"){l.next=16;break}return G.default.success("Logged in successfully!"),l.next=10,$();case 10:if(x.m8){l.next=12;break}return l.abrupt("return");case 12:return h=x.m8.location.query,o=h,R=o.redirect,x.m8.push(R||"/"),l.abrupt("return");case 16:I((0,P.Z)((0,P.Z)({},y),{},{type:"account"})),l.next=23;break;case 19:l.prev=19,l.t0=l.catch(1),V="Login failed, please check!",G.default.error(V);case 23:C(!1);case 24:case"end":return l.stop()}},u,null,[[1,19]])}));return function(c){return m.apply(this,arguments)}}(),J=N.status,H=N.type;return(0,r.jsxs)("div",{className:p().container,children:[(0,r.jsxs)("div",{className:p().content,children:[(0,r.jsx)("div",{className:p().top,children:(0,r.jsx)("div",{className:p().header,children:(0,r.jsxs)(b.rU,{to:"/",children:[(0,r.jsx)("img",{alt:"logo",className:p().logo,src:"".concat(re.r8?"/":"/static/","logo.svg")}),(0,r.jsx)("span",{className:p().title,children:re.qH})]})})}),(0,r.jsxs)("div",{className:p().main,children:[(0,r.jsxs)(He.ZP,{initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:"Log in"},render:function(u,c){return c.pop()},submitButtonProps:{loading:i,size:"large",style:{width:"100%"}}},onFinish:function(){var m=(0,D.Z)(T().mark(function u(c){return T().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:E(c);case 1:case"end":return y.stop()}},u)}));return function(u){return m.apply(this,arguments)}}(),children:[(0,r.jsx)(w.Z,{activeKey:F,onChange:z,children:(0,r.jsx)(w.Z.TabPane,{tab:"Login by account"},"account")}),J==="error"&&H==="account"&&(0,r.jsx)(Ge,{content:"wrong username or password"}),F==="account"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ne.Z,{name:"username",fieldProps:{size:"large",prefix:(0,r.jsx)($e.Z,{className:p().prefixIcon})},placeholder:"username",rules:[{required:!0,message:"Username required!"}]}),(0,r.jsx)(ne.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,r.jsx)(Ue,{className:p().prefixIcon})},placeholder:"password",rules:[{required:!0,message:"Password required!"}]})]}),(0,r.jsxs)("div",{style:{marginBottom:24},children:[(0,r.jsx)(b.rU,{to:"/",children:"Visit as guest"}),(0,r.jsx)(b.rU,{to:"/user/register",style:{float:"right"},children:"Signup"})]})]}),(0,r.jsxs)(oe.Z,{className:p().other,children:["Other login methods:",(0,r.jsx)(Be,{className:p().icon})]})]})]}),(0,r.jsx)(Re.Z,{})]})},Xe=Ke}}]);
