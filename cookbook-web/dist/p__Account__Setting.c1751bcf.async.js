(self.webpackChunkcookbook_web=self.webpackChunkcookbook_web||[]).push([[263],{64335:function(c,v,e){"use strict";var i=e(67294),f=(0,i.createContext)({});v.Z=f},21349:function(c,v,e){"use strict";var i=e(84305),f=e(58184),L=e(17781),j=e.n(L),d=e(67294),D=e(94184),N=e.n(D),S=e(64335),W=function(o){var w=(0,d.useContext)(S.Z),K=o.children,A=o.contentWidth,g=o.className,I=o.style,E=(0,d.useContext)(f.ZP.ConfigContext),m=E.getPrefixCls,x=o.prefixCls||m("pro"),P=A||w.contentWidth,R="".concat(x,"-grid-content");return d.createElement("div",{className:N()(R,g,{wide:P==="Fixed"}),style:I},d.createElement("div",{className:"".concat(x,"-grid-content-children")},K))};v.Z=W},58691:function(c){c.exports={baseView:"baseView___oUjxy",left:"left___QdCoD",right:"right___2m6ha",avatar_title:"avatar_title___pMeZU",avatar:"avatar___2h6EO",button_view:"button_view___3YYEA",area_code:"area_code___10Orh",phone_number:"phone_number___1FB4u"}},57764:function(c){c.exports={main:"main___1HS-r",leftMenu:"leftMenu___3vGFj",right:"right___R4J4v",title:"title___26J81"}},17781:function(){},12289:function(c,v,e){"use strict";e.r(v),e.d(v,{default:function(){return Q}});var i=e(11849),f=e(2824),L=e(30887),j=e(99210),d=e(67294),D=e(21349),N=e(57663),S=e(60404),W=e(3182),p=e(34792),o=e(48086),w=e(9715),K=e(82482),A=e(94043),g=e.n(A),I=e(88245),E=e(5429),m=e(48971),x=e(58691),P=e.n(x),R=e(17673),n=e(85893),G=function(){var h=K.Z.useForm(),T=(0,f.Z)(h,1),Z=T[0],l=(0,m.tT)("@@initialState"),U=l.initialState,u=l.setInitialState,C=(0,m.QT)(function(s){return{url:"/api/user/update_password/",method:"post",data:s}},{manual:!0,onSuccess:function(t){if((t==null?void 0:t.status)==="ok"){o.default.success("Password Updated."),o.default.info("Please log in again."),u(function(X){return(0,i.Z)((0,i.Z)({},X),{},{currentUser:{access:"guest",state:"error"}})});var r=m.m8.location,O=r.query,a=O===void 0?{}:O,y=r.pathname,H=a.redirect;window.location.pathname!=="/user/login"&&!H&&m.m8.replace({pathname:"/user/login",search:(0,R.stringify)({redirect:y})})}else(t==null?void 0:t.status)==="error"&&o.default.error("Cannot update.")}}),F=C.run,B=function(){var s=(0,W.Z)(g().mark(function t(r){return g().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:F(r);case 1:case"end":return a.stop()}},t)}));return function(r){return s.apply(this,arguments)}}();return(0,n.jsx)("div",{className:P().baseView,children:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:P().left,children:(0,n.jsxs)(I.ZP,{form:Z,layout:"vertical",onFinish:B,submitter:{render:function(t,r){return[(0,n.jsx)(S.Z,{type:"primary",onClick:function(){var a,y;return(a=t.form)===null||a===void 0||(y=a.submit)===null||y===void 0?void 0:y.call(a)},children:"Update"},"submit")]}},hideRequiredMark:!0,children:[(0,n.jsx)(E.Z,{width:"md",name:"oldPassword",label:"Current Password",placeholder:"",rules:[{required:!0,message:"Please enter your current password!"}]}),(0,n.jsx)(E.Z,{width:"md",name:"newPassword",label:"New Password",placeholder:"",rules:[{required:!0,message:"Please enter your new password!"}]})]})})})})},V=G,z=e(57764),M=e.n(z),$=j.Z.Item,J=function(){var h={security:"Password Settings"},T=(0,d.useState)({mode:"inline",selectKey:"security"}),Z=(0,f.Z)(T,2),l=Z[0],U=Z[1],u=(0,d.useRef)(),C=function(){requestAnimationFrame(function(){if(!!u.current){var t="inline",r=u.current.offsetWidth;u.current.offsetWidth<641&&r>400&&(t="horizontal"),window.innerWidth<768&&r>400&&(t="horizontal"),U((0,i.Z)((0,i.Z)({},l),{},{mode:t}))}})};(0,d.useLayoutEffect)(function(){return u.current&&(window.addEventListener("resize",C),C()),function(){window.removeEventListener("resize",C)}},[u.current]);var F=function(){return Object.keys(h).map(function(t){return(0,n.jsx)($,{children:h[t]},t)})},B=function(){var t=l.selectKey;switch(t){case"security":return(0,n.jsx)(V,{});default:return null}};return(0,n.jsx)(D.Z,{children:(0,n.jsxs)("div",{className:M().main,ref:function(t){t&&(u.current=t)},children:[(0,n.jsx)("div",{className:M().leftMenu,children:(0,n.jsx)(j.Z,{mode:l.mode,selectedKeys:[l.selectKey],onClick:function(t){var r=t.key;U((0,i.Z)((0,i.Z)({},l),{},{selectKey:r}))},children:F()})}),(0,n.jsxs)("div",{className:M().right,children:[(0,n.jsx)("div",{className:M().title,children:h[l.selectKey]}),B()]})]})})},Q=J}}]);
