(self.webpackChunkcookbook_web=self.webpackChunkcookbook_web||[]).push([[531],{68408:function(k){k.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",top:"top___1C1Zi",header:"header___5xZ3f",logo:"logo___2hXsy",title:"title___1-xuF",desc:"desc___-njyT",main:"main___x4OjT",icon:"icon___rzGKO",other:"other___lLyaU",register:"register___11Twg",prefixIcon:"prefixIcon___23Xrx"}},7330:function(){},72164:function(k,W,e){"use strict";e.r(W),e.d(W,{default:function(){return ye}});var B=e(18106),S=e(47428),M=e(11849),s=e(3182),Ee=e(34792),$=e(48086),G=e(2824),Ze=e(17462),oe=e(76772),se=e(94043),b=e.n(se),x=e(67294),le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},ie=le,ce=e(27029),R=function(r,n){return x.createElement(ce.Z,Object.assign({},r,{ref:n,icon:ie}))};R.displayName="LockOutlined";var ue=x.forwardRef(R),de=e(89366),je=e(63185),ve=e(9676),fe=e(23526),me=e(22270),q=e(99122),pe=["options","fieldProps","proFieldProps","valueEnum"];function z(){return z=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},z.apply(this,arguments)}function _(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),n.push.apply(n,a)}return n}function ge(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?_(Object(n),!0).forEach(function(a){ee(t,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(n,a))})}return t}function ee(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function te(t,r){if(t==null)return{};var n=O(t,r),a,d;if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(t);for(d=0;d<p.length;d++)a=p[d],!(r.indexOf(a)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,a)||(n[a]=t[a]))}return n}function O(t,r){if(t==null)return{};var n={},a=Object.keys(t),d,p;for(p=0;p<a.length;p++)d=a[p],!(r.indexOf(d)>=0)&&(n[d]=t[d]);return n}var l=x.forwardRef(function(t,r){var n=t.options,a=t.fieldProps,d=t.proFieldProps,p=t.valueEnum,Y=te(t,pe);return x.createElement(fe.ZP,z({ref:r,valueType:"checkbox",mode:"edit",valueEnum:(0,me.h)(p,void 0)},Y,{fieldProps:ge({options:n},a)},d))}),u=x.forwardRef(function(t,r){var n=t.fieldProps,a=t.children;return x.createElement(ve.Z,z({ref:r},n),a)}),i=(0,q.Z)(u,{valuePropName:"checked"}),v=(0,q.Z)(l),L=i;L.Group=v;var T=L,K=e(91399),U=e(5966),h=e(48971),F=e(19611),H=e(29791),V=e(36571),X=e(68408),C=e.n(X),he=e(88793),o=e(85893),ne=function(r){var n=r.content;return(0,o.jsx)(oe.Z,{style:{marginBottom:24},message:n,type:"error",showIcon:!0})},D=function(r){var n=(0,x.useState)(!1),a=(0,G.Z)(n,2),d=a[0],p=a[1],Y=(0,x.useState)({}),c=(0,G.Z)(Y,2),re=c[0],xe=c[1],Oe=(0,x.useState)("account"),J=(0,G.Z)(Oe,2),Q=J[0],Ce=J[1],w=(0,h.tT)("@@initialState"),P=w.initialState,Pe=w.setInitialState;(0,x.useEffect)(function(){var Z,y;if((P==null||(Z=P.currentUser)===null||Z===void 0?void 0:Z.access)==="admin"||(P==null||(y=P.currentUser)===null||y===void 0?void 0:y.access)==="user"){var g,E;$.default.info("You have already logged in."),h.m8.push((h.m8===null||h.m8===void 0||(g=h.m8.location)===null||g===void 0||(E=g.query)===null||E===void 0?void 0:E.redirect)||"/")}},[]);var N=function(){var Z=(0,s.Z)(b().mark(function y(){var g,E;return b().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,P==null||(g=P.fetchUserInfo)===null||g===void 0?void 0:g.call(P);case 2:if(E=j.sent,!E){j.next=6;break}return j.next=6,Pe(function(ae){return(0,M.Z)((0,M.Z)({},ae),{},{currentUser:E})});case 6:case"end":return j.stop()}},y)}));return function(){return Z.apply(this,arguments)}}(),f=function(){var Z=(0,s.Z)(b().mark(function y(g){var E,A,j,ae,Se;return b().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return p(!0),m.prev=1,m.next=4,(0,V.x4)((0,M.Z)((0,M.Z)({},g),{},{type:Q}));case 4:if(E=m.sent,E.status!=="ok"){m.next=15;break}return $.default.success("Logged in successfully!"),m.next=9,N();case 9:if(h.m8){m.next=11;break}return m.abrupt("return");case 11:return A=h.m8.location.query,j=A,ae=j.redirect,h.m8.push(ae||"/"),m.abrupt("return");case 15:xe(E),m.next=22;break;case 18:m.prev=18,m.t0=m.catch(1),Se="Login failed, please check!",$.default.error(Se);case 22:p(!1);case 23:case"end":return m.stop()}},y,null,[[1,18]])}));return function(g){return Z.apply(this,arguments)}}(),I=re.status,Le=re.type;return(0,o.jsxs)("div",{className:C().container,children:[(0,o.jsxs)("div",{className:C().content,children:[(0,o.jsx)("div",{className:C().top,children:(0,o.jsx)("div",{className:C().header,children:(0,o.jsxs)(F.rU,{to:"/",children:[(0,o.jsx)("img",{alt:"logo",className:C().logo,src:"".concat("/static/","logo.svg")}),(0,o.jsx)("span",{className:C().title,children:he.q})]})})}),(0,o.jsx)("div",{className:C().main,children:(0,o.jsxs)(K.ZP,{initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:"Log in"},render:function(y,g){return g.pop()},submitButtonProps:{loading:d,size:"large",style:{width:"100%"}}},onFinish:function(){var Z=(0,s.Z)(b().mark(function y(g){return b().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:f(g);case 1:case"end":return A.stop()}},y)}));return function(y){return Z.apply(this,arguments)}}(),children:[(0,o.jsx)(S.Z,{activeKey:Q,onChange:Ce,children:(0,o.jsx)(S.Z.TabPane,{tab:"Login by account"},"account")}),I==="error"&&Le==="account"&&(0,o.jsx)(ne,{content:"wrong username or password"}),Q==="account"&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(U.Z,{name:"username",fieldProps:{size:"large",prefix:(0,o.jsx)(de.Z,{className:C().prefixIcon})},placeholder:"Username: admin or user",rules:[{required:!0,message:"Username required!"}]}),(0,o.jsx)(U.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,o.jsx)(ue,{className:C().prefixIcon})},placeholder:"password: ant.design",rules:[{required:!0,message:"Password required\uFF01"}]})]}),(0,o.jsxs)("div",{style:{marginBottom:24},children:[(0,o.jsx)(T,{noStyle:!0,name:"autoLogin",children:"auto login"}),(0,o.jsx)(F.rU,{to:"/user/register",style:{float:"right"},children:"Signup"})]})]})})]}),(0,o.jsx)(H.Z,{})]})},ye=D},76772:function(k,W,e){"use strict";e.d(W,{Z:function(){return te}});var B=e(22122),S=e(96156),M=e(28481),s=e(67294),Ee=e(54549),$=e(15873),G=e(57119),Ze=e(68628),oe=e(73218),se=e(38819),b=e(68855),x=e(40847),le=e(43061),ie=e(60444),ce=e(94184),R=e.n(ce),ue=e(86032),de=e(5467),je=e(6610),ve=e(5991),fe=e(10379),me=e(44144),q=function(O){(0,fe.Z)(u,O);var l=(0,me.Z)(u);function u(){var i;return(0,je.Z)(this,u),i=l.apply(this,arguments),i.state={error:void 0,info:{componentStack:""}},i}return(0,ve.Z)(u,[{key:"componentDidCatch",value:function(v,L){this.setState({error:v,info:L})}},{key:"render",value:function(){var v=this.props,L=v.message,T=v.description,K=v.children,U=this.state,h=U.error,F=U.info,H=F&&F.componentStack?F.componentStack:null,V=typeof L=="undefined"?(h||"").toString():L,X=typeof T=="undefined"?H:T;return h?s.createElement(te,{type:"error",message:V,description:s.createElement("pre",null,X)}):K}}]),u}(s.Component),pe=e(96159),z=function(O,l){var u={};for(var i in O)Object.prototype.hasOwnProperty.call(O,i)&&l.indexOf(i)<0&&(u[i]=O[i]);if(O!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,i=Object.getOwnPropertySymbols(O);v<i.length;v++)l.indexOf(i[v])<0&&Object.prototype.propertyIsEnumerable.call(O,i[v])&&(u[i[v]]=O[i[v]]);return u},_={success:se.Z,info:x.Z,error:le.Z,warning:b.Z},ge={success:$.Z,info:Ze.Z,error:oe.Z,warning:G.Z},ee=function(l){var u,i=l.description,v=l.prefixCls,L=l.message,T=l.banner,K=l.className,U=K===void 0?"":K,h=l.style,F=l.onMouseEnter,H=l.onMouseLeave,V=l.onClick,X=l.afterClose,C=l.showIcon,he=l.closable,o=l.closeText,ne=l.action,D=z(l,["description","prefixCls","message","banner","className","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","action"]),ye=s.useState(!1),t=(0,M.Z)(ye,2),r=t[0],n=t[1],a=s.useRef(),d=s.useContext(ue.E_),p=d.getPrefixCls,Y=d.direction,c=p("alert",v),re=function(f){var I;n(!0),(I=D.onClose)===null||I===void 0||I.call(D,f)},xe=function(){var f=D.type;return f!==void 0?f:T?"warning":"info"},Oe=o?!0:he,J=xe(),Q=function(){var f=D.icon,I=(i?ge:_)[J]||null;return f?(0,pe.wm)(f,s.createElement("span",{className:"".concat(c,"-icon")},f),function(){return{className:R()("".concat(c,"-icon"),(0,S.Z)({},f.props.className,f.props.className))}}):s.createElement(I,{className:"".concat(c,"-icon")})},Ce=function(){return Oe?s.createElement("button",{type:"button",onClick:re,className:"".concat(c,"-close-icon"),tabIndex:0},o?s.createElement("span",{className:"".concat(c,"-close-text")},o):s.createElement(Ee.Z,null)):null},w=T&&C===void 0?!0:C,P=R()(c,"".concat(c,"-").concat(J),(u={},(0,S.Z)(u,"".concat(c,"-with-description"),!!i),(0,S.Z)(u,"".concat(c,"-no-icon"),!w),(0,S.Z)(u,"".concat(c,"-banner"),!!T),(0,S.Z)(u,"".concat(c,"-rtl"),Y==="rtl"),u),U),Pe=(0,de.Z)(D);return s.createElement(ie.Z,{visible:!r,motionName:"".concat(c,"-motion"),motionAppear:!1,motionEnter:!1,onLeaveStart:function(f){return{maxHeight:f.offsetHeight}},onLeaveEnd:X},function(N){var f=N.className,I=N.style;return s.createElement("div",(0,B.Z)({ref:a,"data-show":!r,className:R()(P,f),style:(0,B.Z)((0,B.Z)({},h),I),onMouseEnter:F,onMouseLeave:H,onClick:V,role:"alert"},Pe),w?Q():null,s.createElement("div",{className:"".concat(c,"-content")},s.createElement("div",{className:"".concat(c,"-message")},L),s.createElement("div",{className:"".concat(c,"-description")},i)),ne?s.createElement("div",{className:"".concat(c,"-action")},ne):null,Ce())})};ee.ErrorBoundary=q;var te=ee},17462:function(k,W,e){"use strict";var B=e(43673),S=e.n(B),M=e(7330),s=e.n(M)}}]);
